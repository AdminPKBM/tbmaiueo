import requests
import json

# Ganti dengan URL Anda yang valid
url = "https://raw.githubusercontent.com/Divinemonk/ebooklibrary/main/database.json"

try:
    # Jika repositori privat, uncomment baris berikut dan tambahkan token
    # headers = {"Authorization": "token YOUR_TOKEN"}
    # response = requests.get(url, headers=headers)
    response = requests.get(url)
    response.raise_for_status()  # Cek error HTTP

    # Debug: lihat isi respon
    print("Response Text:", response.text)

    # Coba parse JSON
    if response.text.strip():  # Pastikan tidak kosong
        data = response.json()
        print("Data berhasil diambil:", data)

        # Contoh: simpan ke file lokal
        with open('database.json', 'w') as file:
            json.dump(data, file, indent=4)
        print("Database berhasil diperbarui")
    else:
        print("Error: Respon kosong dari GitHub")

except requests.RequestException as e:
    print(f"Error updating GitHub database: {e}")
except ValueError as e:
    print(f"Error decoding JSON: {e}")
