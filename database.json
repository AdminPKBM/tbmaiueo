import json
import requests

# URL ke file JSON di GitHub (contoh)
url = "https://raw.githubusercontent.com/username/repository/main/database.json"

try:
    # Mengambil data dari GitHub
    response = requests.get(url)
    response.raise_for_status()  # Memeriksa jika ada error HTTP
    data = response.json()  # Data adalah list

    # Memperbarui data (contoh: tambah kategori ke buku dengan id 1)
    for item in data:
        if item['id'] == 1:
            item['categories'].append("Computers & Technology > Programming")
            break

    # Menyimpan ke file lokal
    with open('database.json', 'w') as file:
        json.dump(data, file, indent=4)

    print("Database berhasil diperbarui")

except requests.RequestException as e:
    print(f"Error updating GitHub database: {e}")
except json.JSONDecodeError as e:
    print(f"Error decoding JSON: {e}")
except Exception as e:
    print(f"Error lainnya: {e}")
