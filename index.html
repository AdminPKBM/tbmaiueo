<!DOCTYPE html>
<html>
    <head>
        <title>TBM AIUEO</title>
        <link rel="icon" href="favicon.ico" type="image/x-icon">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4454451699877502"
     crossorigin="anonymous"></script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-5K9XMQBLM0"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-5K9XMQBLM0');
        </script>

        <link rel="stylesheet" href="style.css">
        <script src="script.js"></script> 
    </head>
    <body>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4454451699877502"
     crossorigin="anonymous"></script>
        <div class="container">
            <div class="left-panel left">
                <div class="social-media">
                    <h3>Follow us on:</h3>
                    <div id="g"><a href="https://github.com/komunitasngejah/" target="_blank">Github</a></div>
                    <div id="i"><a href="https://instagram.com/komunitas_ngejah/" target="_blank">Instagram</a></div>
                    <div id="y"><a href="https://youtube.com/channel/UCZ9m6eov8WUW2aQwOvsRQhg/" target="_blank">Youtube</a></div>
                    <div id="t"><a href="https://twitter.com/komunitasngejah/" target="_blank">Twitter</a></div>
                </div>
                <div class="quote">
                    <div class="quote-label">Quote of the day:</div>
                    <div id="random-quote">
                        "Membaca buku di Komunitas Ngejah bukan sekadar menambah wawasan, tapi juga menumbuhkan mimpi dan memperkaya jiwa." üìñ‚ú®
                    </div>
                </div>
                <div class="ad-column">
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4454451699877502"
                            crossorigin="anonymous"></script>
                    <!-- Iklan akan dimuat di sini -->
                </div>
            </div>
        
            <div class="center">
                <h1><center>TBM AIUEO - KOMUNITAS NGEJAH</center></h1>
                <h2><center>eBook Library</center></h2>
                <div class="search-container">
                    <input type="text" id="searchInput" class="search-input" placeholder="Search for a book...">
                    <button class="search-button" onclick="handleSearchInput()">Search</button>
                </div>
                <div id="bookList">
                    <!-- Book items will be dynamically added here -->
                </div>
                <div id="pagination" class="pagination">
                    <!-- Pagination will be dynamically added here -->
                </div>
                <div class="footer">
                    <a href="https://www.celahcahaya.sch.id/">Made with <span class="heart">‚ù§</span></a>
                    <a href="https://www.celahcahaya.sch.id/">Celah Cahaya creation!</a>
                </div>
            </div>

            <div class="right right-panel">
                <span class="tag-label">Tags:</span>
                <div class="tag-container">
                    <div class="tag active" onclick="filterByTag(this)">All</div>
                    <!-- Other tags will be dynamically added here -->
                </div>
            </div>
        </div>

        <script>
            // Data buku dari JSON (dapat diambil dari file atau API)
            const booksData = /* Data JSON yang Anda berikan akan dimuat di sini */;

            // Memuat data buku saat halaman dimuat
            document.addEventListener('DOMContentLoaded', () => {
                loadBooks(booksData);
                loadTags(booksData);
            });

            // Fungsi untuk memuat daftar buku
            function loadBooks(books, filter = "All") {
                const bookList = document.getElementById('bookList');
                bookList.innerHTML = '';

                let filteredBooks = books;
                if (filter !== "All") {
                    filteredBooks = books.filter(book => book.tags.includes(filter));
                }

                filteredBooks.forEach(book => {
                    const bookDiv = document.createElement('div');
                    bookDiv.className = 'book-item';
                    bookDiv.innerHTML = `
                        <img src="${book.cover}" alt="${book.title}" class="book-cover" onerror="this.src='https://via.placeholder.com/128x192.png?text=No+Cover'">
                        <h3>${book.title}</h3>
                        <p>Author: ${book.author}</p>
                        <a href="${book.downloadLink}" target="_blank" class="download-link">Download</a>
                        <div class="book-tags">${book.tags.map(tag => `<span class="tag">${tag}</span>`).join(' ')}</div>
                    `;
                    bookList.appendChild(bookDiv);
                });
            }

            // Fungsi untuk memuat tags unik
            function loadTags(books) {
                const tagContainer = document.querySelector('.tag-container');
                const allTags = ['All', ...new Set(books.flatMap(book => book.tags))];
                allTags.forEach(tag => {
                    const tagDiv = document.createElement('div');
                    tagDiv.className = 'tag';
                    tagDiv.textContent = tag;
                    tagDiv.onclick = () => filterByTag(tagDiv);
                    tagContainer.appendChild(tagDiv);
                });
            }

            // Fungsi untuk memfilter berdasarkan tag
            function filterByTag(tagElement) {
                const tags = document.querySelectorAll('.tag');
                tags.forEach(tag => tag.classList.remove('active'));
                tagElement.classList.add('active');
                loadBooks(booksData, tagElement.textContent);
            }

            // Fungsi untuk menangani pencarian
            function handleSearchInput() {
                const searchQuery = document.getElementById('searchInput').value.toLowerCase();
                const filteredBooks = booksData.filter(book => 
                    book.title.toLowerCase().includes(searchQuery) || 
                    book.author.toLowerCase().includes(searchQuery)
                );
                loadBooks(filteredBooks, document.querySelector('.tag.active').textContent);
            }

            // Attach the event listener to the search input field
            var searchInput = document.getElementById("searchInput");
            searchInput.addEventListener('input', handleSearchInput);
        </script>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4454451699877502"
     crossorigin="anonymous"></script>
    </body>
</html>
